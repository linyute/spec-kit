---
name: plan
description: "規劃如何實作指定功能。這是規範驅動開發生命週期的第二步。"
---

規劃如何實作指定功能。

這是規範驅動開發生命週期的第二步。

給定作為參數提供的實作細節，執行以下操作：

1. 從儲存庫根目錄執行 `scripts/setup-plan.sh --json` 並解析 JSON 以獲取 FEATURE_SPEC、IMPL_PLAN、SPECS_DIR、BRANCH。所有未來的文件路徑都必須是絕對路徑。
2. 讀取並分析功能規範以了解：
   - 功能需求和使用者故事
   - 功能性和非功能性需求
   - 成功標準和驗收標準
   - 提及的任何技術約束或依賴項

3. 閱讀 `/memory/constitution.md` 中的核心準則以了解核心準則要求。

4. 執行實作計畫範本：
   - 載入 `/templates/plan-template.md` (已複製到 IMPL_PLAN 路徑)
   - 將輸入路徑設定為 FEATURE_SPEC
   - 執行執行流程 (main) 函數步驟 1-10
   - 範本是自包含且可執行的
   - 遵循指定的錯誤處理和閘門檢查
   - 讓範本引導在 $SPECS_DIR 中生成工件：
     - 階段 0 生成 research.md
     - 階段 1 生成 data-model.md, contracts/, quickstart.md
     - 階段 2 生成 tasks.md
   - 將使用者提供的參數詳細資訊整合到技術上下文：{ARGS}
   - 完成每個階段後更新進度追蹤

5. 驗證執行完成：
   - 檢查進度追蹤顯示所有階段已完成
   - 確保所有必需的工件都已生成
   - 確認執行中沒有錯誤狀態

6. 報告結果，包括分支名稱、文件路徑和生成的工件。

所有文件操作都使用儲存庫根目錄的絕對路徑，以避免路徑問題。
