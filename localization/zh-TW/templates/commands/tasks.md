---
name: tasks
description: "將計畫分解為可執行的任務。這是規範驅動開發生命週期的第三步。"
---

將計畫分解為可執行的任務。

這是規範驅動開發生命週期的第三步。

根據作為參數提供的上下文，執行以下操作：

1. 從儲存庫根目錄執行 `scripts/check-task-prerequisites.sh --json` 並解析 FEATURE_DIR 和 AVAILABLE_DOCS 列表的 JSON 輸出。所有路徑都必須是絕對路徑。
2. 載入並分析可用的設計文件：
   - 始終讀取 plan.md 以獲取技術堆疊和函式庫
   - 如果存在：讀取 data-model.md 以獲取實體
   - 如果存在：讀取 contracts/ 以獲取 API 端點
   - 如果存在：讀取 research.md 以獲取技術決策
   - 如果存在：讀取 quickstart.md 以獲取測試場景

   注意：並非所有專案都包含所有文件。例如：
   - CLI 工具可能沒有 contracts/
   - 簡單的函式庫可能不需要 data-model.md
   - 根據可用的內容生成任務

3. 根據範本生成任務：
   - 使用 `/templates/tasks-template.md` 作為基礎
   - 將範例任務替換為基於以下內容的實際任務：
     * **設定任務**：專案初始化、依賴項、程式碼檢查
     * **測試任務 [P]**：每個契約一個，每個整合場景一個
     * **核心任務**：每個實體、服務、CLI 命令、端點一個
     * **整合任務**：資料庫連接、中介軟體、日誌記錄
     * **完善任務 [P]**：單元測試、效能、文件

4. 任務生成規則：
   - 每個契約檔案 → 契約測試任務，標記為 [P]
   - data-model 中的每個實體 → 模型建立任務，標記為 [P]
   - 每個端點 → 實作任務（如果共用檔案則不平行）
   - 每個使用者故事 → 整合測試，標記為 [P]
   - 不同檔案 = 可以平行 [P]
   - 相同檔案 = 循序（無 [P]）

5. 依賴項排序任務：
   - 設定在所有任務之前
   - 測試在實作之前 (TDD)
   - 模型在服務之前
   - 服務在端點之前
   - 核心在整合之前
   - 所有任務在完善之前

6. 包含平行執行範例：
   - 將可以一起執行的 [P] 任務分組
   - 顯示實際的任務代理命令

7. 使用以下內容建立 FEATURE_DIR/tasks.md：
   - 來自實作計畫的正確功能名稱
   - 編號任務 (T001, T002 等)
   - 每個任務的清晰檔案路徑
   - 依賴項備註
   - 平行執行指南

任務生成的上下文：{ARGS}

tasks.md 應該可以立即執行 - 每個任務都必須足夠具體，以便 LLM 無需額外上下文即可完成。
